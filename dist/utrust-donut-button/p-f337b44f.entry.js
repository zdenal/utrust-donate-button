import{r as t,h as i}from"./p-acf5407e.js";const s=class{constructor(i){t(this,i),this.amounts="[]",this.min=1}parseAmountsProp(t){t&&(this._amounts=JSON.parse(t))}componentWillLoad(){this.parseAmountsProp(this.amounts),1==this._amounts.length&&(this.selectedAmount=this._amounts[0])}async handleSubmit(t){t.preventDefault(),console.log(this.selectedAmount),this.loading=!0;const i=await fetch("https://zdenal.builtwithdark.com/api/donate",{method:"POST",body:JSON.stringify({id:this.donateId,price:`${this.selectedAmount}`,return_url:window.location.origin,cancel_url:window.location.origin,first_name:"firstName",last_name:"lastName",email:"email@email.com"})});if(!i.ok)return alert("Make Donate Error"),void(this.loading=!1);const s=await i.json();window.location.href=s.redirect_url}handleChange(t){this.selectedAmount=t.target.value<this.min?this.min:t.target.value}renderChoices(){if(this._amounts.length>1)return i("div",null,this._amounts.map(t=>i("span",null,i("input",{type:"radio",name:"donate-amount",id:`donate-amount-${t}`,value:t,onChange:this.handleChange.bind(this)}),i("label",{htmlFor:`donate-amount-${t}`},t))))}renderCustom(){if(0==this._amounts.length)return i("label",null,"Amount:",i("input",{type:"number",min:this.min,value:this.selectedAmount,onInput:this.handleChange.bind(this)}))}buttonTitle(){return this.selectedAmount?`Donate ${this.selectedAmount} ${this.currency}`:"Donate"}render(){return i("form",{onSubmit:t=>this.handleSubmit(t)},this.renderChoices(),this.renderCustom(),i("div",null,i("input",{disabled:!this.selectedAmount||this.loading,type:"submit",value:this.buttonTitle()})))}static get watchers(){return{amounts:["parseAmountsProp"]}}};s.style=":host{display:block}";export{s as utrust_donate}